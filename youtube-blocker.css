/* ============================================================================
   Flow YouTube Blocker - Granular Feature CSS
   Applied when per-feature classes are present on <html>
   ============================================================================ */

/* Homepage Feed */
html.yt-block-homepage ytd-rich-grid-renderer,
html.yt-block-homepage ytd-rich-grid-renderer ~ ytd-rich-grid-renderer,
html.yt-block-homepage ytd-shelf-renderer,
html.yt-block-homepage ytd-horizontal-card-list-renderer {
  display: none !important;
}

/* Posts - hide YouTube posts (images, polls, etc. from channels) */
html.yt-block-posts ytd-backstage-post-renderer,
html.yt-block-posts ytd-post-renderer,
html.yt-block-posts ytd-rich-section-renderer:has(ytd-backstage-post-renderer),
html.yt-block-posts ytd-rich-shelf-renderer:has(ytd-backstage-post-renderer),
/* Posts section headers */
html.yt-block-posts ytd-shelf-renderer:has([href*="/posts"]),
html.yt-block-posts ytd-shelf-renderer:has([href*="/community"]),
html.yt-block-posts h2:has(~ ytd-backstage-post-renderer),
html.yt-block-posts h2:has(~ ytd-post-renderer),
/* Latest YouTube posts section */
html.yt-block-posts ytd-rich-shelf-renderer[is-posts],
html.yt-block-posts ytd-grid-renderer ytd-backstage-post-renderer {
  display: none !important;
}

/* Shorts - hide in all locations */
html.yt-block-shorts ytd-reel-shelf-renderer,
html.yt-block-shorts ytd-rich-section-renderer:has(yt-reel-shelf-renderer),
html.yt-block-shorts ytd-shelf-renderer[title^="Shorts"],
html.yt-block-shorts ytd-rich-shelf-renderer[is-shelf],
html.yt-block-shorts ytd-grid-renderer ytd-thumbnail-overlay-time-status-renderer[overlay-style="SHORTS"],
/* Individual Shorts in homepage feed */
html.yt-block-shorts ytd-grid-video-renderer:has(a[href*="/shorts"]),
html.yt-block-shorts ytd-rich-item-renderer:has(a[href*="/shorts"]),
/* Individual Shorts in sidebar recommendations */
html.yt-block-shorts ytd-compact-video-renderer:has(a[href*="/shorts"]),
/* Shorts in playlists */
html.yt-block-shorts ytd-playlist-panel-video-renderer:has(a[href*="/shorts"]),
/* Shorts navigation button */
html.yt-block-shorts ytd-mini-guide-entry-renderer:has(a[href*="/shorts"]),
html.yt-block-shorts tp-yt-paper-tab:has(a[href*="/shorts"]) {
  display: none !important;
}

/* Sidebar (Up Next) on watch page */
html.yt-block-sidebar ytd-watch-next-secondary-results-renderer,
html.yt-block-sidebar #related,
html.yt-block-sidebar ytd-watch-flexy #secondary {
  display: none !important;
}

/* Expand video player when sidebar is hidden */
html.yt-block-sidebar ytd-watch-flexy #primary,
html.yt-block-sidebar ytd-watch-flexy #columns {
  max-width: 100% !important;
  width: 100% !important;
  flex: 1 1 100% !important;
}

/* Comments Section */
html.yt-block-comments ytd-comments,
html.yt-block-comments #comments,
html.yt-block-comments ytd-comment-thread-renderer {
  display: none !important;
}

/* End Cards (video end screen overlays) */
html.yt-block-endcards ytd-compact-autoplay-renderer,
html.yt-block-endcards .html5-end-screen,
html.yt-block-endcards .ytp-ce-element,
html.yt-block-endcards .ytp-ce-video,
html.yt-block-endcards .ytp-ce-playlist,
html.yt-block-endcards .ytp-ce-overlay {
  display: none !important;
}

/* Live Chat */
html.yt-block-chat ytd-live-chat-frame,
html.yt-block-chat #chat,
html.yt-block-chat ytd-live-chat-frame#chatframe {
  display: none !important;
}

/* Notification Bell */
html.yt-block-notifications ytd-notification-topbar-button-renderer,
html.yt-block-notifications #notification-button,
html.yt-block-notifications ytd-topbar-menu-button-renderer:has(button[aria-label*="notification"]) {
  display: none !important;
}

/* Create Button - use broad targeting with JS assistance */
html.yt-block-create-button [data-flow-create-button],
html.yt-block-create-button ytd-topbar-menu-button-renderer:has(button[aria-label*="Create"]),
html.yt-block-create-button ytd-topbar-menu-button-renderer:has(button[aria-label*="create"]),
html.yt-block-create-button yt-button-shape:has(button[aria-label*="Create"]),
html.yt-block-create-button yt-button-shape:has(button[aria-label*="create"]),
html.yt-block-create-button yt-button-shape:has(button[title*="Create"]),
html.yt-block-create-button yt-button-shape:has(button[title*="create"]),
html.yt-block-create-button #upload-btn,
html.yt-block-create-button ytd-topbar-menu-button-renderer:has(svg path[d*="M17 10.5"]),
html.yt-block-create-button yt-button-shape:has(svg path[d*="M17 10.5"]) {
  display: none !important;
}

/* Autoplay Toggle and Playlist Panel */
html.yt-block-autoplay ytd-autoplay-renderer,
html.yt-block-autoplay ytd-playlist-panel-renderer,
html.yt-block-autoplay #autoplay-checkbox,
html.yt-block-autoplay .ytp-autonav-toggle-button {
  display: none !important;
}

/* ============================================================================
   Legacy Support - Single class for backward compatibility
   ============================================================================ */

/* For users with old setting, apply all features */
.ytd-fyp-blocker-enabled ytd-rich-grid-renderer,
.ytd-fyp-blocker-enabled ytd-watch-next-secondary-results-renderer,
.ytd-fyp-blocker-enabled ytd-shelf-renderer,
.ytd-fyp-blocker-enabled ytd-horizontal-card-list-renderer,
.ytd-fyp-blocker-enabled ytd-rich-section-renderer {
  display: none !important;
}

/* Hide channel recommendations (legacy) */
.ytd-fyp-blocker-enabled ytd-guide-section-renderer:not(:first-child),
.ytd-fyp-blocker-enabled ytd-mini-guide-renderer {
  display: none !important;
}

/* Hide notifications (legacy) */
.ytd-fyp-blocker-enabled ytd-notification-topbar-button-renderer {
  display: none !important;
}

/* Keep search functionality visible */
.ytd-fyp-blocker-enabled ytd-searchbox,
.ytd-fyp-blocker-enabled ytd-search {
  display: block !important;
}

/* Keep header visible for navigation */
.ytd-fyp-blocker-enabled ytd-masthead {
  display: flex !important;
}

/* Keep subscriptions visible */
.ytd-fyp-blocker-enabled ytd-guide-section-renderer:first-child {
  display: block !important;
}

/* Keep video player visible on watch pages */
.ytd-fyp-blocker-enabled ytd-watch-flexy #primary {
  display: block !important;
  max-width: 100% !important;
  width: 100% !important;
  flex: 1 1 100% !important;
  margin-right: 0 !important;
}

.ytd-fyp-blocker-enabled ytd-watch-flexy #secondary {
  display: none !important;
}

.ytd-fyp-blocker-enabled ytd-watch-flexy[flex-layout] #columns {
  display: flex !important;
  flex-direction: row !important;
  align-items: stretch !important;
}

.ytd-fyp-blocker-enabled ytd-watch-flexy[flex-layout] #primary {
  flex: 1 1 100% !important;
  max-width: 100% !important;
  width: 100% !important;
}

/* Optionally, hide only the right sidebar recommendations, not the whole sidebar */
.ytd-fyp-blocker-enabled #related {
  display: none !important;
}
